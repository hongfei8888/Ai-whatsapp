# 📋 多账号功能 - 测试清单

## ✅ 已完成测试 (7/10)

### 1. ✅ 账号添加
- [x] 输入账号名称
- [x] 生成二维码
- [x] 扫码登录
- [x] 自动刷新列表

**测试时间**: 2025-10-11 10:00
**测试结果**: ✅ 通过

---

### 2. ✅ 账号删除
- [x] 点击删除按钮
- [x] 确认删除
- [x] 从列表移除
- [x] 数据库记录删除

**测试时间**: 2025-10-11 10:30
**测试结果**: ✅ 通过

---

### 3. ✅ 扫码登录
- [x] 二维码显示
- [x] 手机扫码
- [x] 登录成功
- [x] 状态更新

**测试时间**: 2025-10-11 11:00
**测试结果**: ✅ 通过

---

### 4. ✅ 状态显示
- [x] 在线状态（绿色）
- [x] 离线状态（灰色）
- [x] 连接中状态（黄色）
- [x] 实时更新

**测试时间**: 2025-10-11 11:30
**测试结果**: ✅ 通过（修复后）

---

### 5. ✅ 列表刷新
- [x] 自动刷新
- [x] 手动刷新
- [x] 状态同步

**测试时间**: 2025-10-11 11:35
**测试结果**: ✅ 通过

---

### 6. ✅ 二维码生成
- [x] 快速生成
- [x] 清晰可扫
- [x] 自动刷新

**测试时间**: 2025-10-11 11:00
**测试结果**: ✅ 通过

---

### 7. ✅ 状态同步
- [x] 前后端同步
- [x] 数据库持久化
- [x] UI 实时更新

**测试时间**: 2025-10-11 11:35
**测试结果**: ✅ 通过

---

## ⏳ 待测试功能 (3/10)

### 8. ⏳ 账号切换
**测试步骤**:
1. 添加 2 个账号
2. 两个账号都登录
3. 点击切换器
4. 选择另一个账号
5. 检查当前账号是否切换

**预期结果**:
- 当前账号 ID 改变
- UI 显示更新
- LocalStorage 保存

**测试时间**: 待测试
**测试结果**: ⏳

---

### 9. ⏳ 账号启动/停止
**测试步骤**:

**启动测试**:
1. 选择一个离线账号
2. 点击启动按钮
3. 观察状态变化
4. 检查是否生成二维码

**停止测试**:
1. 选择一个在线账号
2. 点击停止按钮
3. 观察状态变化
4. 检查是否断开连接

**预期结果**:
- 状态正确切换
- UI 按钮状态更新
- 数据库状态同步

**测试时间**: 待测试
**测试结果**: ⏳

---

### 10. ⏳ 多账号并发
**测试步骤**:
1. 添加 2-3 个账号
2. 所有账号都登录
3. 使用不同账号同时发送消息
4. 检查消息是否正确隔离

**预期结果**:
- 每个账号独立工作
- 消息不会混淆
- 会话数据隔离

**测试时间**: 待测试
**测试结果**: ⏳

---

## 🐛 问题追踪

### 已解决问题

#### ✅ 问题 1: 删除账号 500 错误
**时间**: 2025-10-11 09:00
**原因**: 缺少 Account 模型
**解决**: 添加 schema 并重置数据库
**状态**: ✅ 已解决

#### ✅ 问题 2: 状态显示离线
**时间**: 2025-10-11 11:00
**原因**: 前后端状态值不一致
**解决**: 添加 normalizeStatus() 函数
**状态**: ✅ 已解决

#### ✅ 问题 3: 添加账号后页面不刷新
**时间**: 2025-10-11 10:30
**原因**: QR 轮询逻辑 bug
**解决**: 修复轮询逻辑，QR 失败不中断状态检查
**状态**: ✅ 已解决

### 待解决问题

**无** ✅

---

## 📝 测试记录

### 测试环境
- 操作系统: Windows 10
- Node.js: v20.19.2
- 浏览器: Microsoft Edge (最新版)
- 数据库: SQLite

### 测试账号
- 账号1: ggdgdx (8613002101408) - ✅ 在线
- 账号2: dsdsds (已删除)

---

## 🚀 下一步测试建议

### 1. 基础功能测试
- [ ] 账号切换
- [ ] 账号启动
- [ ] 账号停止
- [ ] 多账号并发

### 2. 边界测试
- [ ] 删除正在使用的账号
- [ ] 切换到已删除的账号
- [ ] 启动已在线的账号
- [ ] 停止已离线的账号

### 3. 性能测试
- [ ] 添加 10 个账号
- [ ] 同时登录多个账号
- [ ] 长时间运行稳定性
- [ ] 内存占用情况

### 4. 压力测试
- [ ] 快速添加/删除账号
- [ ] 快速切换账号
- [ ] 并发发送大量消息
- [ ] 长时间持续运行

---

## 📊 测试统计

**总功能**: 10 项
**已测试**: 7 项 (70%)
**待测试**: 3 项 (30%)
**通过率**: 100% (已测试功能)
**问题数**: 0 个（未解决）

---

## ✅ 测试结论

### 当前状态
**多账号功能基本可用，核心功能已验证！**

### 建议
1. **可以投入使用**: 基础功能稳定
2. **继续测试**: 完成剩余 3 项测试
3. **监控运行**: 关注长期稳定性

### 风险评估
- **低风险**: 已测试功能
- **中风险**: 未测试功能
- **待评估**: 长期稳定性

---

## 📞 问题反馈

如发现问题，请记录：
1. 问题描述
2. 重现步骤
3. 预期行为
4. 实际行为
5. 错误日志

---

**清单更新时间**: 2025-10-11 11:45:00 (UTC+8)
**下次更新**: 完成剩余测试后

