# 📖 WhatsApp 多账号自动化营销系统 - 用户使用手册

> 版本：v1.0  
> 更新日期：2025-10-11  
> 适用于：Windows 系统

---

## 📚 目录

1. [系统简介](#系统简介)
2. [快速开始](#快速开始)
3. [账号管理](#账号管理)
4. [联系人管理](#联系人管理)
5. [消息管理](#消息管理)
6. [批量操作](#批量操作)
7. [社群营销](#社群营销)
8. [自动回复](#自动回复)
9. [数据统计](#数据统计)
10. [常见问题](#常见问题)

---

## 系统简介

### 🎯 系统功能

WhatsApp 多账号自动化营销系统是一款功能强大的 WhatsApp 营销工具，支持：

- ✅ **多账号管理** - 同时管理多个 WhatsApp 账号
- ✅ **批量操作** - 批量发送消息给联系人
- ✅ **社群营销** - 群组管理、批量进群、群发消息
- ✅ **自动回复** - AI 智能自动回复（支持 DeepSeek）
- ✅ **数据统计** - 全面的数据分析和报表

### 🔧 系统要求

- **操作系统：** Windows 10/11
- **Node.js：** v18 或更高版本
- **浏览器：** Chrome、Edge 或 Firefox（最新版本）
- **WhatsApp：** 有效的 WhatsApp 账号

---

## 快速开始

### 1. 启动系统

#### 方法一：使用启动脚本（推荐）

双击运行 `启动系统.bat` 文件，系统会自动启动前端和后端服务。

#### 方法二：手动启动

**启动后端：**
```bash
cd server
npm run dev
```

**启动前端：**
```bash
cd web
npm run dev
```

### 2. 访问系统

启动成功后，在浏览器中访问：
- **前端地址：** http://localhost:3000
- **后端地址：** http://localhost:4000

### 3. 添加第一个账号

1. 系统会自动显示"添加账号"对话框
2. 输入账号名称（例如："主账号"）
3. 点击"开始登录"
4. 使用 WhatsApp 手机应用扫描二维码
5. 等待登录成功

---

## 账号管理

### 📱 添加账号

#### 步骤：

1. **点击"添加账号"按钮**
   - 位置：右上角账号切换器旁边的 `+` 按钮

2. **填写账号信息**
   - **账号名称：** 为账号设置一个便于识别的名称
   - 示例："客服账号"、"营销账号1"等

3. **扫描二维码**
   - 打开 WhatsApp 手机应用
   - 进入"设置" → "关联的设备" → "关联设备"
   - 扫描屏幕上显示的二维码

4. **等待连接**
   - 系统会自动检测连接状态
   - 成功后会显示"已连接"

#### 注意事项：

⚠️ **每个 WhatsApp 账号只能同时在一个系统中使用**  
⚠️ **确保手机网络稳定**  
⚠️ **二维码有效期约 60 秒，超时需要重新生成**

### 🔄 账号切换

#### 使用账号切换器

1. 点击顶部导航栏的账号切换器
2. 从下拉列表中选择要切换的账号
3. 系统会自动切换到选定的账号

#### 账号状态指示

- 🟢 **在线** - 账号已连接，可以正常使用
- 🟡 **连接中** - 正在连接 WhatsApp 服务器
- 🔴 **离线** - 账号未连接或已断开
- 🔵 **需要扫码** - 需要重新扫描二维码登录

### ❌ 删除账号

#### 步骤：

1. 进入"账号管理"页面
2. 找到要删除的账号
3. 点击"删除"按钮
4. 确认删除操作

#### 注意：

⚠️ **删除账号会同时删除该账号的所有数据**（联系人、消息记录等）  
⚠️ **此操作不可恢复，请谨慎操作**

### 🔌 账号退出登录

如果需要在其他设备上使用该 WhatsApp 账号：

1. 进入"账号管理"页面
2. 点击"退出登录"按钮
3. 系统会断开与 WhatsApp 的连接
4. 该账号可以在其他设备上登录

---

## 联系人管理

### 📇 同步联系人

#### 自动同步

系统会在账号登录成功后自动同步联系人。

#### 手动同步

1. 进入"通讯录"页面
2. 点击"同步联系人"按钮
3. 等待同步完成
4. 系统会显示同步的联系人数量

### 👤 查看联系人

#### 联系人列表

- **位置：** 通讯录页面
- **显示信息：**
  - 联系人名称
  - 电话号码
  - 最后消息时间
  - 消息数量

#### 搜索联系人

1. 在联系人列表顶部的搜索框输入关键词
2. 支持按名称或电话号码搜索
3. 实时显示搜索结果

### 💬 与联系人聊天

#### 开始聊天

1. 在联系人列表中点击联系人
2. 或在聊天页面选择联系人
3. 进入聊天界面

#### 发送消息

1. 在输入框输入消息内容
2. 点击"发送"按钮或按 Enter 键
3. 消息会立即发送到 WhatsApp

#### 发送媒体文件

1. 点击"上传文件"按钮
2. 选择要发送的图片、视频或文档
3. （可选）添加描述文字
4. 点击"发送"

#### 支持的文件类型

- 📷 **图片：** JPG, PNG, GIF, WEBP
- 🎥 **视频：** MP4, AVI, MOV
- 📄 **文档：** PDF, DOC, DOCX, XLS, XLSX

---

## 消息管理

### 📨 消息列表

#### 查看所有消息

1. 进入"聊天"页面
2. 左侧显示所有对话列表
3. 点击对话查看消息详情

#### 消息类型

- 💬 **文本消息** - 纯文本内容
- 📷 **图片消息** - 包含图片
- 🎥 **视频消息** - 包含视频
- 📄 **文件消息** - 包含文档

#### 消息状态

- ✓ **已发送** - 消息已发送到服务器
- ✓✓ **已送达** - 消息已送达对方
- ✓✓ **已读** - 对方已读消息

### 🔍 搜索消息

1. 点击搜索图标
2. 输入关键词
3. 查看搜索结果
4. 点击结果跳转到对应消息

### 📋 消息模板

#### 创建消息模板

1. 进入"消息模板"页面
2. 点击"新建模板"按钮
3. 填写模板信息：
   - **模板名称**
   - **模板内容**
   - **变量**（可选）
4. 保存模板

#### 使用模板

1. 在发送消息时点击"模板"按钮
2. 选择要使用的模板
3. （如有变量）填写变量值
4. 发送消息

#### 模板变量

支持的变量：
- `{name}` - 联系人姓名
- `{phone}` - 联系人电话
- `{date}` - 当前日期
- `{time}` - 当前时间

示例：
```
你好 {name}，感谢你的咨询！
我们会在 {date} 之前回复您。
```

---

## 批量操作

### 📤 批量发送消息

#### 使用场景

- 向多个客户发送通知
- 营销活动推广
- 节日问候

#### 操作步骤

1. **进入批量操作页面**
   - 点击左侧菜单"批量操作"

2. **点击"新建群发任务"**

3. **选择发送方式**
   - **使用模板：** 选择已保存的消息模板
   - **自定义内容：** 直接输入消息内容

4. **选择目标联系人**
   - **全部联系人：** 向所有联系人发送
   - **指定联系人：** 手动选择特定联系人
   - **按标签筛选：** 根据标签筛选联系人

5. **设置发送选项**
   - **发送速率：** 每分钟发送数量（默认 8 条/分钟）
   - **随机延迟：** 每条消息之间的随机延迟（防止被封）
   - **定时发送：** 设置未来的发送时间（可选）

6. **开始发送**
   - 点击"立即发送"或"定时发送"
   - 系统会自动执行批量发送任务

#### 发送配置建议

推荐设置：
- ⚙️ **发送速率：** 6-10 条/分钟
- ⏱️ **随机延迟：** 3-5 秒
- 📊 **每日上限：** 不超过 500 条

⚠️ **注意：发送过快可能导致账号被 WhatsApp 限制**

### 📊 查看批量任务

#### 任务状态

- 🟡 **待处理** - 任务已创建，等待执行
- 🔵 **处理中** - 正在发送消息
- 🟢 **已完成** - 所有消息已发送
- 🔴 **失败** - 任务执行失败
- ⚫ **已取消** - 任务被手动取消

#### 任务详情

点击任务可以查看：
- 📈 **发送进度** - 已发送/总数
- ✅ **成功数量** - 成功发送的消息数
- ❌ **失败数量** - 发送失败的消息数
- 📋 **详细列表** - 每个联系人的发送状态

### ⏸️ 任务控制

#### 暂停任务

1. 在任务列表中找到正在运行的任务
2. 点击"暂停"按钮
3. 任务会停止发送

#### 恢复任务

1. 找到已暂停的任务
2. 点击"恢复"按钮
3. 任务会继续发送

#### 取消任务

1. 找到要取消的任务
2. 点击"取消"按钮
3. 确认取消操作
4. 任务会立即停止，不再继续发送

---

## 社群营销

### 🔄 群组同步

#### 同步群组列表

1. **进入社群营销页面**
2. **点击"同步群组"按钮**
3. **等待同步完成**
   - 系统会从 WhatsApp 获取所有群组
   - 显示同步的群组数量

#### 自动同步

- 登录账号时自动同步
- 建议每周手动同步一次

### 🚀 批量进群

#### 使用场景

- 快速加入多个目标群组
- 拓展营销渠道

#### 操作步骤

1. **准备群组邀请链接**
   - 格式：`https://chat.whatsapp.com/xxxxx`
   - 可以一次准备多个链接

2. **创建进群任务**
   - 进入社群营销页面
   - 点击"批量进群"标签
   - 点击"新建进群任务"

3. **填写任务信息**
   - **任务标题：** 为任务设置名称
   - **邀请链接：** 粘贴群组邀请链接（每行一个）

4. **设置进群选项**
   - **延迟时间：** 每次进群之间的延迟（建议 30-60 秒）
   - **自动问候：** 进群后自动发送问候消息（可选）
   - **问候消息：** 自定义问候内容

5. **开始执行**
   - 点击"立即执行"
   - 系统会自动依次加入群组

#### 注意事项

⚠️ **进群速度不宜过快，建议每小时不超过 10 个群组**  
⚠️ **确保邀请链接有效且未过期**  
⚠️ **遵守群组规则，不要发送垃圾信息**

### 📢 群组群发

#### 使用场景

- 向多个群组发送相同消息
- 产品推广、活动通知

#### 操作步骤

1. **创建群发任务**
   - 进入社群营销页面
   - 点击"群发消息"标签
   - 点击"新建群发任务"

2. **填写群发信息**
   - **任务标题：** 任务名称
   - **消息内容：** 要发送的消息
   - **选择群组：** 勾选目标群组

3. **设置发送选项**
   - **发送速率：** 每分钟发送到多少个群组（建议 5-8 个）
   - **随机延迟：** 消息之间的随机延迟
   - **定时发送：** 设置未来的发送时间（可选）

4. **发送媒体（可选）**
   - 点击"上传媒体"
   - 选择图片或视频
   - 添加媒体描述

5. **开始群发**
   - 点击"立即发送"或"定时发送"
   - 查看发送进度

#### 群发策略

推荐做法：
- ✅ **发送有价值的内容**
- ✅ **避免频繁群发（建议每周不超过 2 次）**
- ✅ **遵守群组规则**
- ✅ **提供退订选项**

避免事项：
- ❌ **不要发送垃圾广告**
- ❌ **不要发送违法违规内容**
- ❌ **不要在夜间发送消息**

### 💬 群组聊天

#### 查看群组消息

1. 进入社群营销页面
2. 点击"群组列表"标签
3. 点击群组查看消息历史

#### 发送群组消息

1. 选择群组
2. 在消息输入框输入内容
3. 点击"发送"

#### 群组设置

- **监控群组：** 开启后会记录所有群组消息
- **关键词监控：** 设置关键词，有人提及时收到通知
- **自动回复：** 为群组设置自动回复规则

### 📊 群组统计

#### 查看群组数据

- **群组数量：** 已加入的群组总数
- **活跃群组：** 最近 7 天有消息的群组
- **消息总数：** 所有群组的消息总数
- **成员总数：** 所有群组的成员总数

#### 群组排行

- **最活跃群组：** 按消息数量排序
- **最大群组：** 按成员数量排序

---

## 自动回复

### 🤖 AI 自动回复

#### 功能介绍

系统支持使用 AI（DeepSeek）自动回复客户消息，无需人工干预。

#### 配置 AI 自动回复

1. **获取 DeepSeek API Key**
   - 访问 DeepSeek 官网注册账号
   - 获取 API Key

2. **配置系统**
   - 进入"设置"页面
   - 找到"AI 配置"部分
   - 输入 DeepSeek API Key
   - 保存设置

3. **启用自动回复**
   - 在设置中开启"AI 自动回复"
   - 选择要启用自动回复的账号

#### 自动回复规则

系统支持以下回复模式：

**1. 智能回复模式**
- AI 根据对话历史智能回复
- 适合客服场景

**2. 关键词回复模式**
- 检测到特定关键词时触发回复
- 适合常见问题解答

**3. 混合模式**
- 优先使用关键词回复
- 无匹配时使用 AI 回复

#### 设置回复延迟

为了让回复更自然：
- **最小延迟：** 2-5 秒
- **最大延迟：** 5-10 秒
- **随机延迟：** 系统会随机选择延迟时间

### 📝 关键词回复

#### 创建关键词规则

1. **进入"自动回复"页面**
2. **点击"新建规则"**
3. **填写规则信息**
   - **关键词：** 触发词（支持多个，用逗号分隔）
   - **回复内容：** 自动回复的消息
   - **匹配方式：**
     - 完全匹配
     - 包含关键词
     - 正则表达式

4. **保存规则**

#### 关键词规则示例

```
关键词：价格,多少钱,报价
回复：您好！我们的产品价格是 XXX 元，详情请咨询客服。

关键词：营业时间,几点上班
回复：我们的营业时间是周一至周五 9:00-18:00。

关键词：地址,位置,在哪里
回复：我们的地址是：XXX 市 XXX 区 XXX 路 XXX 号。
```

### ⏰ 工作时间设置

#### 设置自动回复时间

1. 进入"设置"页面
2. 找到"工作时间"设置
3. 配置：
   - **工作日：** 周一至周五
   - **工作时间：** 9:00-18:00
   - **非工作时间自动回复：** 自定义非工作时间的回复消息

示例非工作时间回复：
```
您好！当前为非工作时间，我们会在工作时间尽快回复您。
工作时间：周一至周五 9:00-18:00
```

---

## 数据统计

### 📈 仪表盘

#### 总览数据

仪表盘显示：
- **今日消息数：** 今天收发的消息总数
- **活跃联系人：** 最近 7 天有消息往来的联系人
- **批量任务：** 正在执行和已完成的批量任务
- **群组数量：** 已加入的群组总数

#### 消息趋势

- **消息数量趋势图：** 显示最近 7/30 天的消息数量变化
- **收发比例：** 收到消息与发送消息的比例
- **活跃时段：** 消息最多的时间段

### 📊 详细统计

#### 联系人统计

- **最活跃联系人：** 按消息数量排序
- **新增联系人：** 最近新增的联系人
- **联系人分布：** 按地区或标签分组

#### 群组统计

- **最活跃群组：** 消息最多的群组
- **群组成员统计：** 各群组的成员数量
- **群组消息分布：** 各群组的消息占比

#### 批量操作统计

- **任务完成率：** 成功完成的任务比例
- **消息发送成功率：** 成功发送的消息比例
- **平均发送速度：** 每分钟发送消息数

### 📥 导出报表

#### 导出数据

1. 在统计页面点击"导出"按钮
2. 选择导出格式：
   - CSV（Excel 可打开）
   - JSON
   - PDF

3. 选择导出内容：
   - 联系人列表
   - 消息记录
   - 批量任务报告
   - 群组统计

4. 下载文件

---

## 常见问题

### ❓ 登录相关

**Q: 二维码一直不出现怎么办？**

A: 请尝试以下方法：
1. 刷新页面
2. 检查后端服务是否正常运行
3. 查看浏览器控制台是否有错误信息
4. 清除浏览器缓存后重试

**Q: 扫码后一直显示"连接中"？**

A: 可能的原因：
1. 网络连接不稳定，请检查网络
2. WhatsApp 服务器响应慢，请耐心等待
3. 如果超过 2 分钟仍未连接，请刷新页面重试

**Q: 账号频繁掉线怎么办？**

A: 
1. 检查网络连接是否稳定
2. 确保手机上的 WhatsApp 没有同时在其他设备登录
3. 不要频繁切换账号
4. 重启系统

### ❓ 消息发送

**Q: 消息发送失败怎么办？**

A: 检查以下几点：
1. 账号是否在线
2. 联系人电话号码是否正确
3. 网络连接是否正常
4. 查看后端日志获取详细错误信息

**Q: 批量发送消息很慢？**

A: 这是正常现象：
1. 为了防止被 WhatsApp 限制，系统会控制发送速度
2. 默认速度是 8 条/分钟
3. 可以在设置中适当调整，但不建议超过 15 条/分钟

**Q: 为什么有些消息没有发送？**

A: 可能的原因：
1. 联系人电话号码无效或不存在
2. 对方屏蔽了您的账号
3. 账号被 WhatsApp 临时限制
4. 查看批量任务详情中的失败原因

### ❓ 群组相关

**Q: 群组同步后看不到某些群组？**

A: 
1. 确认您确实在该群组中
2. 重新点击"同步群组"
3. 检查群组是否被设为"静音"或"存档"

**Q: 群发消息没有发送到群组？**

A: 
1. 确认选择的是群组，不是联系人
2. 确认账号有在群组中发消息的权限
3. 查看任务详情中的错误信息

**Q: 批量进群失败？**

A: 可能的原因：
1. 邀请链接已过期
2. 群组已满员
3. 群组设置了加入限制
4. 账号被群组管理员屏蔽

### ❓ 性能相关

**Q: 系统运行缓慢？**

A: 
1. 关闭不需要的浏览器标签
2. 重启后端和前端服务
3. 清理浏览器缓存
4. 检查电脑内存占用情况

**Q: 数据库文件太大？**

A: 
1. 定期清理历史消息（保留最近 3 个月即可）
2. 删除不需要的批量任务记录
3. 使用数据库清理工具

### ❓ 错误处理

**Q: 出现"Account not found or not started"错误？**

A: 
1. 确认账号已登录且在线
2. 刷新页面重试
3. 重启后端服务
4. 删除账号重新登录

**Q: 出现数据库错误？**

A: 
1. 停止所有服务
2. 备份数据库文件（`prisma/dev.db`）
3. 运行数据库修复脚本
4. 如果问题持续，联系技术支持

---

## 📞 技术支持

### 获取帮助

如果遇到本手册未涵盖的问题：

1. **查看系统日志**
   - 后端日志：`server-log.txt`
   - 前端日志：浏览器控制台

2. **查看文档**
   - 项目根目录下的各种说明文档
   - GitHub Issues

3. **联系开发者**
   - 通过项目 GitHub 页面提交 Issue

### 系统维护

#### 定期维护建议

**每天：**
- ✅ 检查账号在线状态
- ✅ 查看批量任务执行情况

**每周：**
- ✅ 同步群组列表
- ✅ 清理失败的批量任务
- ✅ 查看数据统计报表

**每月：**
- ✅ 清理历史消息记录
- ✅ 备份重要数据
- ✅ 更新系统（如有新版本）

---

## 📝 附录

### 快捷键

| 快捷键 | 功能 |
|--------|------|
| `Ctrl + /` | 打开搜索 |
| `Ctrl + N` | 新建对话 |
| `Ctrl + Enter` | 发送消息 |
| `Esc` | 关闭对话框 |

### 术语表

| 术语 | 说明 |
|------|------|
| **账号** | WhatsApp 账号 |
| **联系人** | 通讯录中的个人 |
| **群组** | WhatsApp 群聊 |
| **批量操作** | 向多个联系人发送消息 |
| **群发** | 向多个群组发送消息 |
| **二维码** | 用于登录 WhatsApp 的 QR 码 |
| **会话** | 与某个联系人或群组的对话 |

---

## 📄 版本历史

| 版本 | 日期 | 更新内容 |
|------|------|----------|
| v1.0 | 2025-10-11 | 初始版本发布 |

---

**🎉 感谢使用 WhatsApp 多账号自动化营销系统！**

如有任何问题或建议，欢迎反馈！

