# 社群营销系统 - 功能测试清单

## 测试环境准备

### 前置条件
- [ ] WhatsApp 已登录并连接成功
- [ ] 数据库迁移已完成 (`npx prisma db push`)
- [ ] 前端服务运行正常 (`http://localhost:3000`)
- [ ] 后端服务运行正常 (`http://localhost:4000`)
- [ ] WebSocket 连接正常

---

## 一、批量进群功能测试

### 1.1 页面访问
- [ ] 访问 `/groups/join-batch` 页面正常加载
- [ ] 顶部导航标签显示正确（批量进群、群组群发、群消息监控）
- [ ] 侧边栏"社群营销"菜单正常展开
- [ ] 侧边栏子菜单"批量进群"高亮显示

### 1.2 任务创建
- [ ] 点击"+ 创建任务"按钮打开对话框
- [ ] 输入任务标题（必填）
- [ ] 输入邀请链接（每行一个）
  - [ ] 测试有效的 WhatsApp 群组邀请链接
  - [ ] 测试无效链接的错误提示
- [ ] 配置延迟设置（最小/最大延迟）
- [ ] 启用/禁用自动欢迎语
- [ ] 输入欢迎语内容
- [ ] 点击"创建任务"成功

### 1.3 任务执行
- [ ] 任务创建后状态为"待处理"或"进行中"
- [ ] 任务列表实时更新进度
- [ ] 进度条正常显示（0-100%）
- [ ] "加入成功"数量实时增加
- [ ] "加入失败"数量正常统计
- [ ] 任务状态自动切换（pending → running → completed）

### 1.4 任务控制
- [ ] 取消任务功能正常
- [ ] 取消后任务状态变为"已取消"
- [ ] 任务结束后显示结束时间

### 1.5 数据展示
- [ ] 任务列表表格显示完整
  - [ ] 任务名称
  - [ ] 发送账号
  - [ ] 群链接数量
  - [ ] 加入成功数
  - [ ] 加入失败数
  - [ ] 进度
  - [ ] 状态
  - [ ] 开始时间
  - [ ] 结束时间
  - [ ] 操作按钮
- [ ] 筛选功能正常（按状态筛选）
- [ ] 搜索功能正常（按任务名称）

### 1.6 错误处理
- [ ] 空任务标题提示
- [ ] 空邀请链接提示
- [ ] 无效链接格式提示
- [ ] WhatsApp 未登录提示
- [ ] 网络错误提示

---

## 二、群组群发功能测试

### 2.1 页面访问
- [ ] 访问 `/groups/broadcast` 页面正常加载
- [ ] 顶部导航标签切换正常
- [ ] "群组群发"标签高亮显示

### 2.2 群组同步
- [ ] 点击"同步群组"按钮
- [ ] 成功从 WhatsApp 同步群组列表
- [ ] 群组数量统计正确
- [ ] 群组信息显示完整（名称、成员数）

### 2.3 任务创建
- [ ] 点击"+ 创建任务"打开对话框
- [ ] 输入任务标题（必填）
- [ ] 输入消息内容（必填）
- [ ] 选择目标群组
  - [ ] 单选功能
  - [ ] 多选功能
  - [ ] 全选功能
  - [ ] 清空功能
  - [ ] 显示已选数量
- [ ] 启用定时发送
  - [ ] 选择日期
  - [ ] 选择时间
- [ ] 配置发送速率（条/分钟）
- [ ] 点击"创建任务"成功

### 2.4 任务执行
- [ ] 任务创建后状态正确（pending 或 scheduled）
- [ ] 立即发送任务自动开始
- [ ] 定时任务在指定时间开始
- [ ] 实时显示发送进度
- [ ] "已发送"数量实时更新
- [ ] "失败"数量正常统计
- [ ] 发送速率控制生效（延迟设置）

### 2.5 任务控制
- [ ] 暂停发送中的任务
- [ ] 暂停后状态变为"已暂停"
- [ ] 恢复已暂停的任务
- [ ] 恢复后继续发送
- [ ] 取消任务功能
- [ ] 取消后停止发送

### 2.6 数据展示
- [ ] 任务列表表格显示完整
  - [ ] 任务名称
  - [ ] 发送账号
  - [ ] 计划发送数
  - [ ] 已发送数
  - [ ] 失败数
  - [ ] 状态徽章
  - [ ] 计划开始时间
  - [ ] 实际开始时间
  - [ ] 结束时间
  - [ ] 操作按钮
- [ ] 状态筛选功能
- [ ] 任务名称搜索
- [ ] 分页显示（如有大量数据）

### 2.7 错误处理
- [ ] 空任务标题提示
- [ ] 空消息内容提示
- [ ] 未选择群组提示
- [ ] 群组不存在提示
- [ ] 发送失败错误记录
- [ ] 网络错误处理

---

## 三、群消息监控功能测试

### 3.1 页面访问
- [ ] 访问 `/groups/monitoring` 页面正常加载
- [ ] 左右分栏布局显示正常
- [ ] "群消息监控"标签高亮显示

### 3.2 群组选择
- [ ] 群组下拉列表显示所有群组
- [ ] 选择群组后自动加载消息
- [ ] 群组信息显示正确（名称、成员数）

### 3.3 监控设置
- [ ] 点击"监控设置"按钮打开对话框
- [ ] 开启/关闭监控开关
  - [ ] 开关状态正确保存
  - [ ] 开关状态实时生效
- [ ] 添加监控关键词
  - [ ] 支持多行输入（每行一个）
  - [ ] 关键词正确保存
- [ ] 点击"保存设置"成功
- [ ] 设置保存后立即生效

### 3.4 消息列表
- [ ] 消息列表正常加载
- [ ] 消息卡片显示完整
  - [ ] 发送人信息
  - [ ] 消息内容
  - [ ] 发送时间
  - [ ] 媒体类型标识
  - [ ] 关键词命中标记
- [ ] 消息按时间倒序排列
- [ ] 实时接收新消息
- [ ] 关键词命中自动标记（黄色徽章）

### 3.5 筛选功能
- [ ] 按发送人筛选
- [ ] 按关键词搜索
- [ ] 按日期范围筛选
  - [ ] 开始日期
  - [ ] 结束日期
- [ ] 组合筛选正常工作
- [ ] 点击"搜索"刷新结果
- [ ] 清空筛选条件

### 3.6 活跃用户排行榜
- [ ] 右侧排行榜显示正常
- [ ] 显示前10名活跃用户
- [ ] 用户信息显示完整
  - [ ] 排名徽章
  - [ ] 用户名称/电话
  - [ ] 消息数量
- [ ] 前三名特殊显示（金银铜牌）
- [ ] 排行榜实时更新

### 3.7 实时更新
- [ ] 新消息自动显示在列表中
- [ ] 关键词自动检测
- [ ] 活跃用户排行自动更新
- [ ] WebSocket 连接状态正常

### 3.8 数据统计
- [ ] 消息总数统计正确
- [ ] 成员总数统计正确
- [ ] 关键词命中次数统计
- [ ] 统计数据实时更新

### 3.9 错误处理
- [ ] 群组不存在提示
- [ ] 未开启监控提示
- [ ] 关键词为空提示
- [ ] 加载失败错误提示

---

## 四、WebSocket 实时更新测试

### 4.1 连接测试
- [ ] 页面加载时自动连接 WebSocket
- [ ] 连接成功显示"已连接"
- [ ] 连接失败显示"未连接"
- [ ] 断线自动重连

### 4.2 事件测试
#### 批量进群
- [ ] `join_task_progress` 事件正常接收
- [ ] 进度条实时更新
- [ ] 成功/失败数量实时更新

#### 群组群发
- [ ] `broadcast_progress` 事件正常接收
- [ ] 发送进度实时更新
- [ ] 任务状态自动切换

#### 群消息监控
- [ ] `group_message` 事件正常接收
- [ ] 新消息自动显示
- [ ] 关键词命中实时检测

---

## 五、UI/UX 测试

### 5.1 样式一致性
- [ ] 三个页面使用统一配色
- [ ] 按钮样式一致
- [ ] 表格样式一致
- [ ] 卡片样式一致
- [ ] 输入框样式一致

### 5.2 响应式设计
- [ ] 大屏幕（1920x1080）显示正常
- [ ] 中等屏幕（1366x768）显示正常
- [ ] 小屏幕（1024x768）显示正常
- [ ] 布局自适应

### 5.3 交互体验
- [ ] 按钮hover效果
- [ ] 点击反馈明显
- [ ] 加载状态显示
- [ ] 成功/错误提示
- [ ] 过渡动画流畅

### 5.4 导航体验
- [ ] 侧边栏导航正常
- [ ] 子菜单展开/收起流畅
- [ ] 活跃项高亮显示
- [ ] 顶部标签切换正常
- [ ] 面包屑导航（如有）

---

## 六、性能测试

### 6.1 加载性能
- [ ] 页面首次加载时间 < 3秒
- [ ] 数据刷新时间 < 1秒
- [ ] WebSocket 连接时间 < 2秒

### 6.2 数据处理
- [ ] 100+ 任务列表加载流畅
- [ ] 1000+ 消息列表显示正常
- [ ] 实时更新不卡顿
- [ ] 长时间运行稳定

### 6.3 资源占用
- [ ] CPU 占用正常（< 20%）
- [ ] 内存占用正常（< 500MB）
- [ ] 网络请求合理

---

## 七、兼容性测试

### 7.1 浏览器兼容
- [ ] Chrome（最新版）
- [ ] Edge（最新版）
- [ ] Firefox（最新版）
- [ ] Safari（如有Mac）

### 7.2 数据库兼容
- [ ] SQLite（开发环境）
- [ ] PostgreSQL（生产环境）

---

## 八、集成测试

### 8.1 完整流程测试
#### 批量进群 → 群组群发 → 群消息监控
- [ ] 批量加入多个群组
- [ ] 同步群组列表到群发页面
- [ ] 创建群发任务并发送
- [ ] 开启群消息监控
- [ ] 查看实时消息
- [ ] 检查关键词命中

### 8.2 数据一致性
- [ ] 批量进群后群组数量正确
- [ ] 群发任务与实际发送一致
- [ ] 监控消息与实际消息一致
- [ ] 统计数据准确

---

## 九、安全测试

### 9.1 输入验证
- [ ] SQL注入防护
- [ ] XSS攻击防护
- [ ] 特殊字符处理

### 9.2 权限控制
- [ ] API鉴权正常
- [ ] 未登录重定向
- [ ] 敏感操作确认

---

## 十、文档检查

### 10.1 用户文档
- [ ] README.md 更新
- [ ] 功能说明完整
- [ ] 使用示例清晰

### 10.2 技术文档
- [ ] API文档完整
- [ ] 数据库设计文档
- [ ] 部署文档

---

## 测试结果汇总

### 关键指标
- 总测试项：~150 项
- 通过率目标：> 95%
- 严重问题：0 个
- 一般问题：< 5 个

### 测试环境
- 操作系统：Windows 10
- Node.js版本：18.x
- 浏览器：Chrome 120+
- 数据库：SQLite

### 测试人员
- 测试人员：[姓名]
- 测试日期：[日期]
- 测试版本：v1.0.0

---

## 已知问题

### 高优先级
- [ ] 无

### 中优先级
- [ ] 无

### 低优先级
- [ ] 无

---

## 建议和改进

### 功能增强
1. 批量进群：添加进群结果导出功能
2. 群组群发：支持富文本消息和媒体文件
3. 群消息监控：添加数据可视化图表

### 性能优化
1. 实现虚拟滚动优化长列表
2. 添加数据缓存机制
3. 优化 WebSocket 事件处理

### UI/UX 改进
1. 添加暗黑模式支持
2. 优化移动端适配
3. 增加操作引导和帮助文档

---

**测试完成日期**: ___________  
**测试人员签名**: ___________  
**审核人员签名**: ___________

