# ğŸ“– è®¾ç½®é¡µé¢å…¨é¢ä¼˜åŒ–å®ŒæˆæŒ‡å—

## âœ… å·²å®Œæˆçš„å¼€å‘å·¥ä½œ

### åç«¯å¼€å‘

#### 1. ç³»ç»Ÿè®¾ç½®æœåŠ¡
**æ–‡ä»¶**: `server/app/src/services/system-settings-service.ts`

- âœ… åˆ›å»ºç»Ÿä¸€çš„ç³»ç»Ÿè®¾ç½®ç®¡ç†æœåŠ¡
- âœ… æ”¯æŒè·å–å’Œæ›´æ–°ç³»ç»Ÿè®¾ç½®
- âœ… åŒ…å«æ‰€æœ‰æ ¸å¿ƒè®¾ç½®ï¼šAIå¼€å…³ã€å†·å´æ—¶é—´ã€æ¶ˆæ¯é™åˆ¶ã€é€šçŸ¥ç­‰
- âœ… è®¾ç½®éªŒè¯å’Œç¼“å­˜æœºåˆ¶

#### 2. ç»Ÿè®¡èšåˆAPI
**æ–‡ä»¶**: `server/app/src/routes/stats.ts`

æ–°å¢ç«¯ç‚¹ï¼š
- âœ… `GET /stats/overview` - ç³»ç»Ÿæ€»è§ˆï¼ˆè”ç³»äººæ•°ã€æ¶ˆæ¯æ•°ã€æ¨¡æ¿æ•°ç­‰ï¼‰
- âœ… `GET /stats/messages` - æ¶ˆæ¯ç»Ÿè®¡ï¼ˆä»Šæ—¥/æœ¬å‘¨å‘é€æ•°ã€æˆåŠŸç‡ã€è¶‹åŠ¿ï¼‰
- âœ… `GET /stats/activity` - æ´»åŠ¨ç»Ÿè®¡ï¼ˆæœ€è¿‘æ´»è·ƒè”ç³»äººã€æ‰¹é‡æ“ä½œï¼‰

æ•´åˆç°æœ‰ç»Ÿè®¡ï¼š
- âœ… `/batch/stats` - æ‰¹é‡æ“ä½œç»Ÿè®¡
- âœ… `/translate/stats` - ç¿»è¯‘ç»Ÿè®¡
- âœ… `/knowledge/stats` - çŸ¥è¯†åº“ç»Ÿè®¡

#### 3. æ•°æ®ç®¡ç†API
**æ–‡ä»¶**: `server/app/src/routes/data-management.ts`

æ–°å¢ç«¯ç‚¹ï¼š
- âœ… `POST /data/export` - å¯¼å‡ºæ•°æ®ï¼ˆJSON/CSVæ ¼å¼ï¼‰
- âœ… `POST /data/cleanup` - æ¸…ç†æ—§æ•°æ®
- âœ… `GET /data/storage-info` - è·å–å­˜å‚¨ä¿¡æ¯

æ”¯æŒçš„æ•°æ®ç±»å‹ï¼š
- è”ç³»äººã€æ¶ˆæ¯ã€æ¨¡æ¿ã€æ‰¹é‡æ“ä½œã€çŸ¥è¯†åº“

#### 4. è·¯ç”±æ³¨å†Œ
**æ–‡ä»¶**: `server/app/src/server.ts`

- âœ… æ³¨å†Œç»Ÿè®¡è·¯ç”±
- âœ… æ³¨å†Œæ•°æ®ç®¡ç†è·¯ç”±
- âœ… æ·»åŠ ç³»ç»Ÿè®¾ç½®ç«¯ç‚¹ï¼ˆGET/PUT `/settings`ï¼‰

### å‰ç«¯å¼€å‘

#### 5. å‰ç«¯APIå®¢æˆ·ç«¯
**æ–‡ä»¶**: `web/lib/api.ts`

æ–°å¢APIæ¥å£ï¼š
- âœ… `api.settings.get()` / `api.settings.update()`
- âœ… `api.stats.overview()` / `api.stats.messages()` / `api.stats.activity()`
- âœ… `api.data.export()` / `api.data.cleanup()` / `api.data.storageInfo()`

#### 6. ç»Ÿè®¡å¡ç‰‡ç»„ä»¶
**æ–‡ä»¶**: `web/components/StatCard.tsx`

- âœ… å¯å¤ç”¨çš„ç»Ÿè®¡å¡ç‰‡ç»„ä»¶
- âœ… æ”¯æŒæ ‡é¢˜ã€æ•°å€¼ã€è¶‹åŠ¿ã€å›¾æ ‡ã€é¢œè‰²ä¸»é¢˜
- âœ… WhatsApp é£æ ¼è®¾è®¡

#### 7. è®¾ç½®é¡µé¢å®Œå…¨é‡å†™
**æ–‡ä»¶**: `web/app/settings/page.tsx` (1000+ è¡Œä»£ç )

é‡‡ç”¨æ ‡ç­¾é¡µå¸ƒå±€ï¼ŒåŒ…å«6ä¸ªåŠŸèƒ½æ¨¡å—ï¼š

##### Tab 1: åŸºç¡€è®¾ç½® âœ…
- AI è‡ªåŠ¨å›å¤å¼€å…³
- è‡ªåŠ¨å›å¤å¼€å…³
- å…¨å±€å†·å´æ—¶é—´ï¼ˆå°æ—¶ï¼‰
- å•ä¸ªè”ç³»äººå›å¤é—´éš”ï¼ˆåˆ†é’Ÿï¼‰
- æ¯æ—¥æœ€å¤§æ¶ˆæ¯æ•°
- æ¯å°æ—¶æœ€å¤§æ¶ˆæ¯æ•°
- é€šçŸ¥å¼€å…³
- é‚®ä»¶é€šçŸ¥å¼€å…³
- ä¿å­˜æŒ‰é’®ï¼ˆè¿æ¥åç«¯APIï¼‰

##### Tab 2: AI é…ç½® âœ…
- **System Prompt ç¼–è¾‘å™¨** - å¤šè¡Œæ–‡æœ¬æ¡†
- **Temperature æ»‘å—** - 0-1 èŒƒå›´ï¼Œæ­¥é•¿0.1
- **Max Tokens è¾“å…¥** - 128-2048
- **Min Chars è¾“å…¥** - 20-500
- **é£æ ¼é¢„è®¾é€‰æ‹©å™¨** - 4ç§é¢„è®¾ï¼ˆç®€æ´ä¸­æ–‡ã€ä¸“ä¸šã€å‹å¥½ã€éšæ„ï¼‰
- **æµ‹è¯•æŒ‰é’®** - æµ‹è¯•å½“å‰AIé…ç½®
- **ä¿å­˜æŒ‰é’®** - ä¿å­˜AIé…ç½®

##### Tab 3: ç¿»è¯‘è®¾ç½® âœ…
- **ç¿»è¯‘åŠŸèƒ½å¼€å…³**
- **é»˜è®¤ç›®æ ‡è¯­è¨€é€‰æ‹©** - ä¸­æ–‡ç®€ä½“/ç¹ä½“ã€è‹±æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡
- **ä½¿ç”¨ç»Ÿè®¡å¡ç‰‡**:
  - æ€»ç¿»è¯‘æ¬¡æ•°
  - æ€»ä½¿ç”¨æ¬¡æ•°
  - ç¼“å­˜å‘½ä¸­ç‡
- **ç¼“å­˜ç®¡ç†** - æ¸…ç†90å¤©å‰çš„ç¿»è¯‘ç¼“å­˜
- **ä¿å­˜æŒ‰é’®**

##### Tab 4: ç»Ÿè®¡ä»ªè¡¨æ¿ âœ…
- **ç³»ç»Ÿæ¦‚è§ˆå¡ç‰‡ï¼ˆ6ä¸ªï¼‰**:
  - è”ç³»äººæ€»æ•°ï¼ˆå«æ´»è·ƒæ•°ï¼‰
  - æ¶ˆæ¯æ€»æ•°ï¼ˆå«ä»Šæ—¥æ•°ï¼‰
  - æ¨¡æ¿æ€»æ•°
  - æ‰¹é‡æ“ä½œæ•°
  - çŸ¥è¯†åº“æ¡ç›®æ•°
  - æ´»è·ƒä¼šè¯æ•°
- **æ¶ˆæ¯ç»Ÿè®¡**:
  - ä»Šæ—¥å‘é€/æ¥æ”¶/æˆåŠŸç‡
  - æœ¬å‘¨è¶‹åŠ¿ï¼ˆæ¯æ—¥æ¶ˆæ¯æ•°ï¼‰
- **æ‰¹é‡æ“ä½œç»Ÿè®¡**:
  - æ€»æ“ä½œæ•°ã€å·²å¤„ç†æ•°ã€æˆåŠŸç‡
- **å­˜å‚¨ä¿¡æ¯**:
  - æ•°æ®åº“å¤§å°
  - æ€»è®°å½•æ•°

##### Tab 5: æ•°æ®ç®¡ç† âœ…
- **å¯¼å‡ºæ•°æ®**:
  - å¯¼å‡ºæ‰€æœ‰æ•°æ®ï¼ˆJSONæ ¼å¼ï¼‰
  - ä»…å¯¼å‡ºè”ç³»äºº
- **æ•°æ®æ¸…ç†**:
  - æ¸…ç†90å¤©å‰çš„æ—§æ¶ˆæ¯
  - æ¸…ç†30å¤©å‰çš„æ‰¹é‡æ“ä½œè®°å½•
  - å±é™©æ“ä½œç¡®è®¤
- **å­˜å‚¨è¯¦æƒ…**:
  - å„è¡¨è®°å½•æ•°è¯¦ç»†åˆ—è¡¨

##### Tab 6: è´¦å·ç®¡ç† âœ…
- **WhatsApp è´¦å·ä¿¡æ¯**:
  - è¿æ¥çŠ¶æ€æ˜¾ç¤º
  - ç”µè¯å·ç æ˜¾ç¤º
- **é‡æ–°ç™»å½•** - è·³è½¬åˆ°ç™»å½•é¡µé¢
- **é€€å‡ºç™»å½•** - æ–­å¼€è¿æ¥å¹¶é€€å‡º

## ğŸ¨ UI/UX ç‰¹æ€§

### è®¾è®¡ç‰¹ç‚¹
- âœ… **æ ‡ç­¾é¡µå¯¼èˆª** - 6ä¸ªæ¸…æ™°çš„åŠŸèƒ½æ¨¡å—
- âœ… **WhatsApp é£æ ¼** - ä¿æŒä¸æ•´ä½“è®¾è®¡ä¸€è‡´
- âœ… **å“åº”å¼å¸ƒå±€** - é€‚é…ä¸åŒå±å¹•å°ºå¯¸
- âœ… **è§†è§‰åé¦ˆ** - æ‚¬åœæ•ˆæœã€åŠ è½½çŠ¶æ€

### äº¤äº’ä¼˜åŒ–
- âœ… **å³æ—¶åé¦ˆ** - æŒ‰é’®æ‚¬åœå˜è‰²
- âœ… **äºŒæ¬¡ç¡®è®¤** - å±é™©æ“ä½œï¼ˆæ¸…ç†ã€åˆ é™¤ã€é€€å‡ºï¼‰éœ€è¦ç¡®è®¤
- âœ… **å®æ—¶æµ‹è¯•** - AIé…ç½®å¯ä»¥æµ‹è¯•
- âœ… **å‹å¥½æç¤º** - æ¯ä¸ªè®¾ç½®é¡¹éƒ½æœ‰æè¿°è¯´æ˜

## ğŸ“Š åŠŸèƒ½ç‰¹æ€§

### ç»Ÿè®¡åŠŸèƒ½
- âœ… **å®æ—¶æ•°æ®** - ä»æ•°æ®åº“å®æ—¶æŸ¥è¯¢
- âœ… **å¤šç»´åº¦ç»Ÿè®¡** - ç³»ç»Ÿæ¦‚è§ˆã€æ¶ˆæ¯ã€æ‰¹é‡æ“ä½œã€ç¿»è¯‘ã€çŸ¥è¯†åº“
- âœ… **è¶‹åŠ¿åˆ†æ** - æœ¬å‘¨æ¯æ—¥æ¶ˆæ¯è¶‹åŠ¿

### æ•°æ®ç®¡ç†
- âœ… **çµæ´»å¯¼å‡º** - æ”¯æŒé€‰æ‹©å¯¼å‡ºå†…å®¹å’Œæ ¼å¼
- âœ… **æ™ºèƒ½æ¸…ç†** - æŒ‰å¤©æ•°æ¸…ç†æ—§æ•°æ®
- âœ… **å­˜å‚¨ç›‘æ§** - å®æ—¶æŸ¥çœ‹æ•°æ®åº“å¤§å°å’Œè®°å½•æ•°

### è®¾ç½®ç®¡ç†
- âœ… **é›†ä¸­é…ç½®** - æ‰€æœ‰ç³»ç»Ÿè®¾ç½®é›†ä¸­ç®¡ç†
- âœ… **æŒä¹…åŒ–å­˜å‚¨** - è®¾ç½®ä¿å­˜åˆ°åç«¯
- âœ… **å®æ—¶ç”Ÿæ•ˆ** - æ›´æ–°åç«‹å³ç”Ÿæ•ˆ

## ğŸš€ ä½¿ç”¨æŒ‡å—

### å¯åŠ¨æœåŠ¡

1. **å¯åŠ¨åç«¯**:
```bash
cd server/app
npm run dev
```

2. **å¯åŠ¨å‰ç«¯**:
```bash
cd web
npm run dev
```

3. **è®¿é—®è®¾ç½®é¡µé¢**:
```
http://localhost:3000/settings
```

### åŸºç¡€è®¾ç½®é…ç½®

1. è¿›å…¥"åŸºç¡€è®¾ç½®"æ ‡ç­¾é¡µ
2. è°ƒæ•´å†·å´æ—¶é—´å’Œæ¶ˆæ¯é™åˆ¶
3. å¼€å¯/å…³é—­è‡ªåŠ¨å›å¤å’Œé€šçŸ¥
4. ç‚¹å‡»"ä¿å­˜è®¾ç½®"

### AI é…ç½®

1. è¿›å…¥"AI é…ç½®"æ ‡ç­¾é¡µ
2. ç¼–è¾‘ System Promptï¼ˆå®šä¹‰AIè¡Œä¸ºï¼‰
3. è°ƒæ•´ Temperatureï¼ˆ0.3-0.7 æ¨èï¼‰
4. è®¾ç½® Max Tokensï¼ˆ256-512 æ¨èï¼‰
5. é€‰æ‹©é£æ ¼é¢„è®¾
6. ç‚¹å‡»"æµ‹è¯• AI"éªŒè¯é…ç½®
7. ç‚¹å‡»"ä¿å­˜é…ç½®"

### ç¿»è¯‘è®¾ç½®

1. è¿›å…¥"ç¿»è¯‘è®¾ç½®"æ ‡ç­¾é¡µ
2. å¼€å¯ç¿»è¯‘åŠŸèƒ½
3. é€‰æ‹©é»˜è®¤ç›®æ ‡è¯­è¨€
4. æŸ¥çœ‹ä½¿ç”¨ç»Ÿè®¡
5. éœ€è¦æ—¶æ¸…ç†æ—§ç¼“å­˜

### æŸ¥çœ‹ç»Ÿè®¡

1. è¿›å…¥"ç»Ÿè®¡ä»ªè¡¨æ¿"æ ‡ç­¾é¡µ
2. æŸ¥çœ‹ç³»ç»Ÿæ¦‚è§ˆå¡ç‰‡
3. æŸ¥çœ‹æ¶ˆæ¯ç»Ÿè®¡å’Œè¶‹åŠ¿
4. æŸ¥çœ‹æ‰¹é‡æ“ä½œå’Œå­˜å‚¨ä¿¡æ¯
5. ç»Ÿè®¡æ•°æ®ä¼šåœ¨åˆ‡æ¢åˆ°è¯¥æ ‡ç­¾é¡µæ—¶è‡ªåŠ¨åŠ è½½

### æ•°æ®ç®¡ç†

1. è¿›å…¥"æ•°æ®ç®¡ç†"æ ‡ç­¾é¡µ
2. **å¯¼å‡ºæ•°æ®**ï¼š
   - ç‚¹å‡»"å¯¼å‡ºä¸º JSON"å¯¼å‡ºæ‰€æœ‰æ•°æ®
   - æˆ–ç‚¹å‡»"å¯¼å‡ºè”ç³»äºº"ä»…å¯¼å‡ºè”ç³»äºº
3. **æ¸…ç†æ•°æ®**ï¼š
   - ç‚¹å‡»"æ¸…ç†æ¶ˆæ¯"åˆ é™¤90å¤©å‰çš„æ¶ˆæ¯
   - ç‚¹å‡»"æ¸…ç†è®°å½•"åˆ é™¤30å¤©å‰çš„æ‰¹é‡æ“ä½œ
   - âš ï¸ æ“ä½œéœ€è¦ç¡®è®¤ï¼Œä¸å¯æ’¤é”€
4. **æŸ¥çœ‹å­˜å‚¨**ï¼š
   - æŸ¥çœ‹å„è¡¨è®°å½•æ•°è¯¦æƒ…

### è´¦å·ç®¡ç†

1. è¿›å…¥"è´¦å·ç®¡ç†"æ ‡ç­¾é¡µ
2. æŸ¥çœ‹ WhatsApp è¿æ¥çŠ¶æ€
3. éœ€è¦æ—¶é‡æ–°ç™»å½•æˆ–é€€å‡ºç™»å½•

## ğŸ“ API ç«¯ç‚¹æ±‡æ€»

### ç³»ç»Ÿè®¾ç½®
- `GET /settings` - è·å–ç³»ç»Ÿè®¾ç½®
- `PUT /settings` - æ›´æ–°ç³»ç»Ÿè®¾ç½®

### ç»Ÿè®¡
- `GET /stats/overview` - ç³»ç»Ÿæ€»è§ˆ
- `GET /stats/messages` - æ¶ˆæ¯ç»Ÿè®¡
- `GET /stats/activity` - æ´»åŠ¨ç»Ÿè®¡

### æ•°æ®ç®¡ç†
- `POST /data/export` - å¯¼å‡ºæ•°æ®
- `POST /data/cleanup` - æ¸…ç†æ•°æ®
- `GET /data/storage-info` - å­˜å‚¨ä¿¡æ¯

### ç°æœ‰é›†æˆ
- `GET /ai/config` - AIé…ç½®
- `PUT /ai/config` - æ›´æ–°AIé…ç½®
- `POST /ai/test` - æµ‹è¯•AI
- `GET /batch/stats` - æ‰¹é‡æ“ä½œç»Ÿè®¡
- `GET /translate/stats` - ç¿»è¯‘ç»Ÿè®¡
- `POST /translate/cleanup` - æ¸…ç†ç¿»è¯‘ç¼“å­˜
- `GET /knowledge/stats` - çŸ¥è¯†åº“ç»Ÿè®¡
- `GET /status` - WhatsAppçŠ¶æ€
- `POST /logout` - é€€å‡ºç™»å½•

## ğŸ” æŠ€æœ¯ç»†èŠ‚

### å‰ç«¯æ¶æ„
- **React Hooks** - useStateã€useEffect
- **çŠ¶æ€ç®¡ç†** - æœ¬åœ°çŠ¶æ€ç®¡ç†
- **API é›†æˆ** - ç»Ÿä¸€çš„ apiFetch å‡½æ•°
- **æ ·å¼** - å†…è”æ ·å¼ï¼ŒWhatsApp é£æ ¼

### åç«¯æ¶æ„
- **Fastify** - é«˜æ€§èƒ½ Web æ¡†æ¶
- **Prisma** - ç±»å‹å®‰å…¨çš„ ORM
- **TypeScript** - ç±»å‹å®‰å…¨
- **æ¨¡å—åŒ–è®¾è®¡** - æœåŠ¡å±‚ã€è·¯ç”±å±‚åˆ†ç¦»

### æ•°æ®åº“
- **SQLite** - å¼€å‘ç¯å¢ƒ
- **Prisma Schema** - æ•°æ®æ¨¡å‹å®šä¹‰
- **å¹¶å‘æŸ¥è¯¢** - Promise.all ä¼˜åŒ–æ€§èƒ½

## âš ï¸ æ³¨æ„äº‹é¡¹

### æ•°æ®æ¸…ç†
- æ¸…ç†æ“ä½œ**ä¸å¯æ’¤é”€**
- å»ºè®®åœ¨æ¸…ç†å‰å…ˆå¯¼å‡ºæ•°æ®å¤‡ä»½
- æ¸…ç†åªåˆ é™¤æŒ‡å®šå¤©æ•°å‰çš„æ•°æ®

### AI é…ç½®
- Temperature è¿‡é«˜ï¼ˆ>0.8ï¼‰å¯èƒ½å¯¼è‡´å›å¤ä¸ç¨³å®š
- Temperature è¿‡ä½ï¼ˆ<0.2ï¼‰å¯èƒ½å¯¼è‡´å›å¤è¿‡äºå›ºå®š
- æ¨èèŒƒå›´ï¼š0.3-0.7

### ç³»ç»Ÿè®¾ç½®
- è®¾ç½®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œé‡å¯æœåŠ¡å™¨ä¼šæ¢å¤é»˜è®¤å€¼
- æœªæ¥å¯ä»¥æ·»åŠ æŒä¹…åŒ–åˆ°æ–‡ä»¶æˆ–æ•°æ®åº“

### æ€§èƒ½
- ç»Ÿè®¡æ•°æ®å¯èƒ½åœ¨å¤§é‡æ•°æ®æ—¶åŠ è½½è¾ƒæ…¢
- å¯¼å‡ºåŠŸèƒ½å¯¹æ¶ˆæ¯æœ‰ 10000 æ¡é™åˆ¶
- æ‰¹é‡æ“ä½œæœ‰ 1000 æ¡é™åˆ¶

## ğŸ¯ åç»­ä¼˜åŒ–å»ºè®®

1. **æŒä¹…åŒ–è®¾ç½®** - å°†ç³»ç»Ÿè®¾ç½®ä¿å­˜åˆ°æ•°æ®åº“
2. **å›¾è¡¨å¯è§†åŒ–** - ä½¿ç”¨å›¾è¡¨åº“ï¼ˆrechartsï¼‰æ˜¾ç¤ºè¶‹åŠ¿
3. **å®šæ—¶åˆ·æ–°** - ç»Ÿè®¡æ•°æ®è‡ªåŠ¨åˆ·æ–°
4. **æ›´å¤šå¯¼å‡ºæ ¼å¼** - CSV æ ¼å¼å®Œå–„
5. **æ‰¹é‡æ“ä½œå†å²** - æ·»åŠ è¯¦ç»†çš„æ‰¹é‡æ“ä½œå†å²æŸ¥çœ‹
6. **æƒé™ç®¡ç†** - æ·»åŠ ç”¨æˆ·æƒé™æ§åˆ¶
7. **å®¡è®¡æ—¥å¿—** - è®°å½•é‡è¦æ“ä½œæ—¥å¿—

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
- æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰
- åç«¯æ—¥å¿—ï¼ˆserver/appï¼‰
- æ•°æ®åº“çŠ¶æ€ï¼ˆprisma/dev.dbï¼‰

---

**è®¾ç½®é¡µé¢å…¨é¢ä¼˜åŒ–å®Œæˆï¼ç°åœ¨ä½ æ‹¥æœ‰ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ç³»ç»Ÿç®¡ç†ä¸­å¿ƒï¼** ğŸ‰

